<!DOCTYPE html>
<html>

<head>
    <title>Froala Pages</title>

    <link rel="stylesheet" type="text/css" href="./css/froala_pages.min.css">

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
        }

    </style>
</head>

<body>
<script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
<div id="selector-id"></div>
<link href='./css/plugins/image_manager.min.css' rel='stylesheet' type='text/css'/>

<!--<script type="text/javascript"-->
<!--        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.min.js"></script>-->
<!--<script type="text/javascript"-->
<!--        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/xml/xml.min.js"></script>-->
<!--<script type="text/javascript" src="/js/froala_editor.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/align.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/code_beautifier.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/code_view.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/colors.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/emoticons.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/draggable.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/font_size.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/font_family.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/image.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/image_manager.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/line_breaker.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/quick_insert.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/link.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/lists.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/paragraph_format.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/paragraph_style.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/video.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/table.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/url.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/emoticons.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/file.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/entities.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/inline_style.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/save.min.js"></script>-->
<!--<script type="text/javascript" src="/js/plugins/fullscreen.min.js"></script>-->

<script>
    (function () {
        new FroalaEditor("#edit", {
            toolbarInline: true,
            toolbarButtons: [ ['bold', 'italic', 'underline', 'strikeThrough', 'textColor', 'backgroundColor', 'emoticons'], ['paragraphFormat', 'align', 'formatOL', 'formatUL', 'indent', 'outdent'], ['insertImage', 'insertLink', 'insertFile', 'insertVideo', 'undo', 'redo'] ],
            toolbarButtonsXS: null,
            toolbarButtonsSM: null,
            toolbarButtonsMD: null
        })
    })()
</script>

<script src="./js/froala_pages.min.js"></script>
<script src="./js/pages_design_blocks_pkgd.min.js"></script>
<!--<script type='text/javascript' src='./js/plugins/image_manager.min.js'></script>-->

<script>
    // Define block custom button.
    FroalaPages.Button.Register('myButton', {
        title: 'My Button',
        icon: {
            type: 'svg',
            template: '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'
        },
        callback() {
// Wave the world.
            alert('Hello World!');

// Show current active block.
            console.log(this.page.activeBlock);
        }
    })

    // Define page edit button.
    FroalaPages.Button.Register('myPageButton', {
        title: 'My Page Button',
        icon: {
            type: 'svg',
            // template: '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'
            template: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="file-download" class="svg-inline--fa fa-file-download fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"></path></svg>'
        },
        callback() {
            var o = this, t = !this.page.iframeBody.querySelector("[data-block-type]");
            t ? c.setDownloadBtnsStatus(this.page, t, !0) : this.page.getHTML().then(function (t) {
                o.page.sharewindow && o.page.sharewindow.show();
                var e = new Blob([t], {type: "text/html"}), n = window.URL.createObjectURL(e),
                    i = document.createElement("a");
                i.href = n, i.download = "froala_design_blocks_website.html", i.click()
            }, function (t) {
                console.log(t)
            })
            // this.el.classList.toggle('fp-active');
        },
        refresh() {
// Change the state of the button.
//             this.el.classList.toggle('fp-active', true);
        }
    });

    // Define page edit button.
    FroalaPages.Button.Register('mySave', {
        title: 'Save',
        icon: {
            type: "html",
            template: '<span>Save</span>'
        },
        callback: function () {
            var o = this, t = !this.page.iframeBody.querySelector("[data-block-type]");
            t ? c.setDownloadBtnsStatus(this.page, t, !0) : this.page.getHTML().then(function (t) {
                o.page.sharewindow && o.page.sharewindow.show();
                var e = new Blob([t], {type: "text/html"}), n = window.URL.createObjectURL(e),
                    i = document.createElement("a");
                i.href = n, i.download = "froala_design_blocks_website.html", i.click()
            }, function (t) {
                console.log(t)
            })
        }
    });

    // FroalaPages.RegisterDesignBlock takes 3 params:
    //   - category name
    //   - the HTML for the design block
    //   - the path for the image
    FroalaPages.RegisterDesignBlock('Test',
        '<section class="fdb-block"><div class="container"><div class="row justify-content-center">' +
        '<img src="/uploads/irka.png">' +
        '<p class="lead">В этом блоке, Олег, мы можем например разместить подготовленный текст с разметкой, изображениями и прочей лабудой. Или например блок с последними статьями, новостями, товарами</p>\n' +
        '<p class="mt-5 mt-sm-4"><a class="btn btn-primary" href="https://froala.com">Download</a></p>' +
        '</div></div></section>', 'test/irka.png');

</script>

<script>
    window.pages = new FroalaPages('selector-id', {
        pageCenterButtons: ['Привет Олег! Я твой новый визивиг редактор!'],
        // pageRightButtons: [['download','mySave']],
        pageLeftButtons: [
            ['edit', 'layout', 'loadhtml', 'myPageButton'],
            ['desktop', 'tablet_landscape', 'tablet_portrait', 'phone']
        ],
        blockButtons: ['moveUp', 'remove'],
        // Set the image upload URL.
        imageManagerLoadURL: '/load_images.php',

        // Set the image delete URL.
        imageManagerDeleteURL: '/delete_image.php',
        key: '', //Place your key after downloading from https://froala.com/pages
        designsThumbsDir:'./design-block/screenshots/',
        // designsImagesDir:'',
        designsDefaultBlocks: 'Test'
    });

    // window.pages.editor.FroalaEditor.INSTANCES.forEach(function (t) {
    //     e.el.contains(t.$oel.get(0)) && t.popups && t.popups.hideAll()
    // })

    // $(function () {
    //     $(window.pages.editor.FroalaEditor).editable({
    //         // Set a preloader.
    //         preloaderSrc: "/images/loader.gif",
    //
    //         // Set the load images request URL.
    //         imagesLoadURL: "/load_images",
    //
    //         // Additional load params.
    //         // imagesLoadParams: {user_id: 4219762},
    //
    //         // Set the load images request URL.
    //         imageDeleteURL: "/delete_image",
    //
    //         // Additional delete params.
    //         imageDeleteParams: {param: 'value'}
    //     }).on('editable.imagesLoadError', function (e, editor, error) {
    //         console.log('Error code:' + error.code)
    //         // Custom error message returned from the server.
    //         if (error.code == 0) {
    //         }
    //
    //         // Bad link. One of the returned image links cannot be loaded.
    //         else if (error.code == 1) {
    //         }
    //
    //         // Error during HTTP request to load images.
    //         else if (error.code == 2) {
    //         }
    //
    //         // Missing imagesLoadURL option.
    //         else if (error.code == 3) {
    //         }
    //
    //         // Parsing response failed.
    //         else if (error.code == 4) {
    //         }
    //     })
    //         .on('editable.imagesLoaded', function (e, editor, data) {
    //             // Do something when the request finishes with success.
    //             alert('Images have been loaded.');
    //         });
    // });
    $(function (){
        $.get( "./start.html", function( data ) {
            window.pages.setHTML(data);
            console.log(data);
        });
    });

</script>
</body>

</html>
